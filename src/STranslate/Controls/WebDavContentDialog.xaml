<ui:ContentDialog
    x:Class="STranslate.Controls.WebDavContentDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:control="clr-namespace:STranslate.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:page="clr-namespace:STranslate.ViewModels.Pages"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    d:DataContext="{d:DesignInstance control:WebDavContentDialog,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    CloseButtonStyle="{DynamicResource {x:Static ui:ThemeKeys.AccentButtonStyleKey}}"
    CloseButtonText="{DynamicResource Close}"
    mc:Ignorable="d">
    <ListBox Background="Transparent" ItemsSource="{Binding Collections}">
        <ListBox.Resources>
            <Style TargetType="ListBoxItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListBoxItem">
                            <ContentPresenter />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ListBox.Resources>
        <ListBox.ItemTemplate>
            <DataTemplate DataType="page:WebDavResult">
                <Grid Margin="0,4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="50" />
                        <ColumnDefinition Width="50" />
                    </Grid.ColumnDefinitions>

                    <control:EditableTextBlock
                        Margin="10,0,20,0"
                        FontSize="{DynamicResource STControlFontSize14}"
                        FontWeight="Bold"
                        Text="{Binding FullName}"
                        ToolTip="{Binding FullName}" />

                    <Button
                        Grid.Column="1"
                        Command="{Binding DataContext.DownloadCommand, RelativeSource={RelativeSource AncestorType=control:WebDavContentDialog}}"
                        CommandParameter="{Binding FullName}">
                        <ui:FontIcon FontFamily="{StaticResource {x:Static ui:ThemeKeys.FluentSystemIconsKey}}" Glyph="&#xF14F;" />
                    </Button>

                    <Button
                        Grid.Column="2"
                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=control:WebDavContentDialog}}"
                        CommandParameter="{Binding FullName}">
                        <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Delete_20_Regular}" />
                    </Button>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</ui:ContentDialog>
