<ui:Page
    x:Class="STranslate.Views.Pages.AboutPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cnvt="clr-namespace:STranslate.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:plugin="clr-namespace:STranslate.Plugin;assembly=STranslate.Plugin"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    xmlns:vm="clr-namespace:STranslate.ViewModels.Pages"
    Title="About"
    d:DataContext="{d:DesignInstance Type=vm:AboutViewModel,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="850"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <ui:ScrollViewerEx
        Padding="20,10"
        ui:FocusVisualHelper.UseSystemFocusVisuals="False"
        IsTabStop="False"
        VerticalScrollBarVisibility="Auto">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <TextBlock
                Margin="0,0,0,12"
                Style="{DynamicResource {x:Static ui:ThemeKeys.SubtitleTextBlockStyleKey}}"
                Text="{DynamicResource About}" />
            <ikw:SimpleStackPanel Grid.Row="1" Spacing="4">

                <ui:SettingsCard Description="{DynamicResource UserDataLocationDescription}" Header="{DynamicResource UserDataLocation}">
                    <ui:SettingsCard.HeaderIcon>
                        <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.FolderPerson_24_Regular}" />
                    </ui:SettingsCard.HeaderIcon>
                    <Button Command="{Binding LocateUserDataCommand}" Content="{DynamicResource OpenDirectory}" />
                </ui:SettingsCard>

                <ui:SettingsCard Header="{DynamicResource DeveloperTools}">
                    <ui:SettingsCard.HeaderIcon>
                        <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Toolbox_24_Regular}" />
                    </ui:SettingsCard.HeaderIcon>
                    <ikw:SimpleStackPanel Orientation="Horizontal" Spacing="12">
                        <Button Content="{DynamicResource ClearCache}" IsEnabled="False" />
                        <Button Content="{DynamicResource ClearLogs}" IsEnabled="False" />
                        <Button>
                            <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.FolderSearch_24_Regular}" />
                            <ui:FlyoutService.Flyout>
                                <ui:MenuFlyout>
                                    <MenuItem Command="{Binding LocateSettingsCommand}" Header="{DynamicResource SettingsDirectory}">
                                        <MenuItem.Icon>
                                            <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Folder_24_Regular}" />
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Command="{Binding LocateLogCommand}" Header="{DynamicResource LogsDirectory}">
                                        <MenuItem.Icon>
                                            <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Folder_24_Regular}" />
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Command="{Binding LocateCacheCommand}" Header="{DynamicResource CacheDirectory}">
                                        <MenuItem.Icon>
                                            <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Folder_24_Regular}" />
                                        </MenuItem.Icon>
                                    </MenuItem>
                                </ui:MenuFlyout>
                            </ui:FlyoutService.Flyout>
                        </Button>
                    </ikw:SimpleStackPanel>
                </ui:SettingsCard>

                <ui:SettingsExpander Description="{DynamicResource BackupMethodDescription}" Header="{DynamicResource BackupMethod}">
                    <ui:SettingsExpander.HeaderIcon>
                        <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.FolderZip_20_Regular}" />
                    </ui:SettingsExpander.HeaderIcon>
                    <ComboBox
                        MinWidth="150"
                        DisplayMemberPath="Display"
                        ItemsSource="{Binding DataProvider.BackupTypes}"
                        SelectedValue="{Binding Settings.Backup.Type}"
                        SelectedValuePath="Value" />

                    <ui:SettingsExpander.Items>
                        <ui:SettingsCard Header="{DynamicResource WebDavAddress}" Visibility="{Binding Settings.Backup.Type, Converter={cnvt:BackupTypeVisibilityConverter}, ConverterParameter=WebDav}">
                            <ui:SettingsCard.HeaderIcon>
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Globe_20_Regular}" />
                            </ui:SettingsCard.HeaderIcon>
                            <TextBox MinWidth="200" Text="{Binding Settings.Backup.Address}" />
                        </ui:SettingsCard>
                        <ui:SettingsCard Header="{DynamicResource WebDavUsername}" Visibility="{Binding Settings.Backup.Type, Converter={cnvt:BackupTypeVisibilityConverter}, ConverterParameter=WebDav}">
                            <ui:SettingsCard.HeaderIcon>
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Person_20_Regular}" />
                            </ui:SettingsCard.HeaderIcon>
                            <TextBox MinWidth="200" Text="{Binding Settings.Backup.Username}" />
                        </ui:SettingsCard>
                        <ui:SettingsCard Header="{DynamicResource WebDavPassword}" Visibility="{Binding Settings.Backup.Type, Converter={cnvt:BackupTypeVisibilityConverter}, ConverterParameter=WebDav}">
                            <ui:SettingsCard.HeaderIcon>
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Password_20_Regular}" />
                            </ui:SettingsCard.HeaderIcon>
                            <PasswordBox
                                MinWidth="200"
                                plugin:PasswordBoxAssistant.Attach="True"
                                plugin:PasswordBoxAssistant.Password="{Binding Settings.Backup.Password}" />
                        </ui:SettingsCard>

                        <ui:SettingsCard Header="{DynamicResource Backup}">
                            <Button Command="{Binding BackupCommand}" Content="{DynamicResource CreateBackup}" />
                        </ui:SettingsCard>
                        <ui:SettingsCard Header="{DynamicResource Restore}">
                            <Button Command="{Binding RestoreCommand}" Content="{DynamicResource RestoreBackup}" />
                        </ui:SettingsCard>
                    </ui:SettingsExpander.Items>
                </ui:SettingsExpander>

                <ui:SettingsCard Header="{DynamicResource LogLevel}">
                    <ui:SettingsCard.HeaderIcon>
                        <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Print_20_Regular}" />
                    </ui:SettingsCard.HeaderIcon>
                    <ComboBox
                        MinWidth="150"
                        DisplayMemberPath="Display"
                        ItemsSource="{Binding DataProvider.LogEventLevels}"
                        SelectedValue="{Binding Settings.LogLevel}"
                        SelectedValuePath="Value" />
                </ui:SettingsCard>

                <ui:SettingsExpander
                    Description="Â© 2020 zggsong &amp; STranslate Contributors"
                    Header="STranslate"
                    IsExpanded="True">
                    <ui:SettingsExpander.HeaderIcon>
                        <Image
                            Width="20"
                            Height="20"
                            Source="/Resources/app.ico" />
                    </ui:SettingsExpander.HeaderIcon>
                    <TextBox
                        Width="Auto"
                        MinWidth="0"
                        Background="Transparent"
                        BorderThickness="0"
                        Foreground="{DynamicResource {x:Static ui:ThemeKeys.TextFillColorSecondaryBrushKey}}"
                        IsReadOnly="True"
                        IsReadOnlyCaretVisible="False"
                        Text="{Binding Version, Mode=OneWay}"
                        TextAlignment="Right" />
                    <ui:SettingsExpander.Items>

                        <ui:SettingsCard Header="{DynamicResource Version}">
                            <Button Margin="0,0,-28,0" Command="{Binding CheckUpdateCommand}">
                                <ui:IconAndText Content="{DynamicResource CheckUpdate}" Icon="{x:Static ui:FluentSystemIcons.GlobeArrowUp_20_Regular}" />
                            </Button>
                        </ui:SettingsCard>

                        <ui:SettingsCard
                            Click="OnRepoCopy"
                            Header="{DynamicResource CloneRepository}"
                            IsClickEnabled="True">
                            <TextBox
                                x:Name="RepoTextBox"
                                Margin="0,0,-5,0"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Center"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="{DynamicResource {x:Static ui:ThemeKeys.TextFillColorSecondaryBrushKey}}"
                                IsReadOnly="True"
                                IsReadOnlyCaretVisible="False"
                                Text="git clone https://github.com/zggsong/stranslate.git"
                                TextAlignment="Right" />
                            <ui:SettingsCard.ActionIcon>
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Copy_24_Regular}" />
                            </ui:SettingsCard.ActionIcon>
                        </ui:SettingsCard>

                        <ui:SettingsCard
                            Click="OnWebsiteRequest"
                            Header="{DynamicResource Website}"
                            IsClickEnabled="True">
                            <ui:SettingsCard.ActionIcon>
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Open_24_Regular}" />
                            </ui:SettingsCard.ActionIcon>
                        </ui:SettingsCard>

                        <ui:SettingsCard
                            Click="OnSponsorRequest"
                            Header="{DynamicResource Sponsor}"
                            IsClickEnabled="True">
                            <ui:SettingsCard.ActionIcon>
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Open_24_Regular}" />
                            </ui:SettingsCard.ActionIcon>
                        </ui:SettingsCard>

                        <ui:SettingsCard
                            Click="OnJoinGroupRequest"
                            Header="{DynamicResource Group}"
                            IsClickEnabled="True">
                            <ui:SettingsCard.ActionIcon>
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Open_24_Regular}" />
                            </ui:SettingsCard.ActionIcon>
                        </ui:SettingsCard>

                        <ui:SettingsCard
                            Click="OnReportRequest"
                            Header="{DynamicResource Report}"
                            IsClickEnabled="True">
                            <ui:SettingsCard.ActionIcon>
                                <ui:FontIcon Icon="{x:Static ui:FluentSystemIcons.Open_24_Regular}" />
                            </ui:SettingsCard.ActionIcon>
                        </ui:SettingsCard>
                    </ui:SettingsExpander.Items>
                </ui:SettingsExpander>

            </ikw:SimpleStackPanel>
        </Grid>
    </ui:ScrollViewerEx>
</ui:Page>